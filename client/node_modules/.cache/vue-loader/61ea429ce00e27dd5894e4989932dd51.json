{"remainingRequest":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/remy/Documents/GitHub/harmonizer/client/src/components/Login.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/remy/Documents/GitHub/harmonizer/client/src/components/Login.vue","mtime":1573483573879},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/css-loader/dist/cjs.js","mtime":1573483570506},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1573483573121},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/postcss-loader/src/index.js","mtime":1573483571772},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/vuetify-loader/lib/loader.js","mtime":1573483573191},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/cache-loader/dist/cjs.js","mtime":1573483569844},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/vue-loader/lib/index.js","mtime":1573483573121}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKYnV0dG9uewogIGNvbG9yOiAjZmZmOwp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-app>\n    <v-content>\n      <v-container\n              class=\"fill-height justify-center align-center\"\n              fluid\n      >\n        <v-flex xs6>\n          <v-alert\n                  v-if=\"error\"\n                  dismissible\n                  type=\"error \">{{ error }}</v-alert>\n          <Panel title=\"login\">\n            <v-card>\n              <v-card-text>\n                <v-form>\n                  <v-text-field\n                          color=\"dark\"\n                          label=\"Username\"\n                          name=\"username\"\n                          prepend-icon=\"person\"\n                          type=\"text\"\n                          v-model=\"username\"\n                  ></v-text-field>\n\n                  <v-text-field\n                          color=\"dark\"\n                          id=\"password\"\n                          label=\"Password\"\n                          name=\"password\"\n                          prepend-icon=\"lock\"\n                          type=\"password\"\n                          v-model=\"password\"\n                  ></v-text-field>\n                </v-form>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn dark color=\"dark\" @click=\"login\">Login</v-btn>\n              </v-card-actions>\n            </v-card>\n          </Panel>\n        </v-flex>\n      </v-container>\n\n    </v-content>\n  </v-app>\n</template>\n\n<script>\n  import AuthenticationService from '../services/AuthenticationService';\n  import Panel from '@/components/Panel';\n\n  export default {\n    data() {\n      return {\n        username: '',\n        password: '',\n        error: null,\n      }\n    },\n    methods: {\n      async login () {\n        try {\n          const response = await AuthenticationService.login({\n            username: this.username,\n            password: this.password\n          })\n          this.$store.dispatch('setToken', response.data.token)\n          this.$store.dispatch('setUser', response.data.user)\n          this.$store.dispatch('setPermission', response.data.usertype)\n          this.$store.dispatch('setDiscipline', response.data.disciplineid)\n\n          const currentUserPermission = this.$store.state.permission\n          if (currentUserPermission == 'admin') {\n            this.$router.push({\n              name: 'admin-dashboard'\n            })\n          } else if (currentUserPermission == 'hod'){\n            this.$router.push({\n              name: 'hod-dashboard'\n            })\n          }else if (currentUserPermission == 'staff-FT'){\n            this.$router.push({\n              name: 'staff-dashboard'\n            })\n          }\n          else if (currentUserPermission == 'staff-PT'){\n            this.$router.push({\n              name: 'staff-dashboard'\n            })\n          }\n          else {\n            this.error = 'Login information was incorrect'\n          }\n        } catch (error) {\n          this.error = error.response.data.error\n        }\n\n      }\n    },\n    components: {\n      Panel\n    }\n  }\n\n</script>\n<style>\n  button{\n    color: #fff;\n  }\n</style>"]}]}