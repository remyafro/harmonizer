{"remainingRequest":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/remy/Documents/GitHub/harmonizer/client/src/components/EditUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/remy/Documents/GitHub/harmonizer/client/src/components/EditUser.vue","mtime":1573313705320},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/cache-loader/dist/cjs.js","mtime":1572018405923},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/babel-loader/lib/index.js","mtime":1572018403706},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/vuetify-loader/lib/loader.js","mtime":1572018408543},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/cache-loader/dist/cjs.js","mtime":1572018405923},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/vue-loader/lib/index.js","mtime":1572018406322}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvUGFuZWwnCmltcG9ydCBVc2Vyc1NlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvVXNlcnNTZXJ2aWNlIjsKaW1wb3J0IERpc2NpcGxpbmVTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL0Rpc2NpcGxpbmVTZXJ2aWNlIjsKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHVzZXI6IHsKICAgICAgICAgICAgICAgIHVzZXJJRCA6IG51bGwsCiAgICAgICAgICAgICAgICB1c2VyTG9naW46IG51bGwsCiAgICAgICAgICAgICAgICB1c2VyUGFzc3dvcmQ6IG51bGwsCiAgICAgICAgICAgICAgICB1c2VyTmFtZTogbnVsbCwKICAgICAgICAgICAgICAgIHVzZXJDb250YWN0OiBudWxsLAogICAgICAgICAgICAgICAgdXNlckVtYWlsOiBudWxsLAogICAgICAgICAgICAgICAgZGlzY2lwbGluZUlEOiBudWxsLAogICAgICAgICAgICAgICAgYWNjb3VudFR5cGU6IG51bGwsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFjY291bnRzOiBbJ2FkbWluJywnc3RhZmYtUFQnLCdzdGFmZi1GVCcsJ2hvZCddLAogICAgICAgICAgICBkaXNjaXBsaW5lT3B0aW9uczogW10sCiAgICAgICAgICAgIGRpc2NpcGxpbmVzOiBudWxsLAogICAgICAgICAgICByZXF1aXJlZDogKHZhbHVlKSA9PiAhIXZhbHVlIHx8ICdSZXF1aXJlZC4nLAogICAgICAgICAgICBlcnJvcjogbnVsbAogICAgICAgIH0KCiAgICB9LAogICAgYXN5bmMgbW91bnRlZCgpewoKICAgICAgICAgICAgY29uc3QgdXNlcklEID0gdGhpcy4kc3RvcmUuc3RhdGUucm91dGUucGFyYW1zLnVzZXJpZAoKICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy4kc3RvcmUuc3RhdGUpOwogICAgICAgICAgICB0aGlzLnVzZXIgPSAoYXdhaXQgVXNlcnNTZXJ2aWNlLnNob3codXNlcklEKSkuZGF0YQoKICAgICAgICB0aGlzLmRpc2NpcGxpbmVzID0gKGF3YWl0IERpc2NpcGxpbmVTZXJ2aWNlLmluZGV4KCkpLmRhdGEKICAgICAgICB0aGlzLmRpc2NpcGxpbmVPcHRpb25zID0gdGhpcy5kaXNjaXBsaW5lcwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBhc3luYyBzYXZlKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7CiAgICAgICAgICAgICAgICBjb25zdCBhcmVBbGxGaWVsZHNGaWxsZWRJbiA9IE9iamVjdAogICAgICAgICAgICAgICAgICAgIC5rZXlzKHRoaXMudXNlcikKICAgICAgICAgICAgICAgICAgICAuZXZlcnkoa2V5ID0+ICEhdGhpcy51c2VyW2tleV0pCiAgICAgICAgICAgICAgICBpZiAoIWFyZUFsbEZpZWxkc0ZpbGxlZEluKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9ICdQbGVhc2UgZmlsbCBpbiBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkcy4nCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBhd2FpdCBVc2Vyc1NlcnZpY2UucHV0KHRoaXMudXNlcikKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAndXNlcicKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICAgICAgICB9CgogICAgICAgIH0sCiAgICAgICAgYXN5bmMgZGVsZXRlVXNlcigpIHsKICAgICAgICAgICAgICAgIGF3YWl0IFVzZXJzU2VydmljZS5kZWxldGUodGhpcy51c2VyKQogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICd1c2VyJwogICAgICAgICAgICAgICAgfSkKCiAgICAgICAgfQogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBQYW5lbAogICAgfQp9Cg=="},{"version":3,"sources":["EditUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"EditUser.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <v-app>\n        <v-container\n                class=\"fill-height align-start\"\n        >\n            <v-flex xs6 class=\"mr-4\">\n                <v-alert\n                        v-if=\"error\"\n                        dismissible\n                        type=\"error\">{{ error }}</v-alert>\n                <Panel title=\"User Metadata\">\n                    <v-card>\n                        <v-card-text>\n                            <v-text-field\n                                    color=\"dark\"\n                                    label=\"User Login\"\n                                    type=\"text\"\n                                    required\n                                    :rules=\"[required]\"\n                                    v-model=\"user.userLogin\"\n                            >\n\n                            </v-text-field>\n                            <v-text-field\n                                    color=\"dark\"\n                                    label=\"User Password\"\n                                    required\n                                    :rules=\"[required]\"\n                                    type=\"password\"\n                                    v-model=\"user.userPassword\"\n                            >\n\n                            </v-text-field>\n                            <v-text-field\n                                    color=\"dark\"\n                                    label=\"User Name\"\n                                    required\n                                    :rules=\"[required]\"\n                                    type=\"text\"\n                                    v-model=\"user.userName\"\n                            >\n\n                            </v-text-field>\n                            <v-text-field\n                                    color=\"dark\"\n                                    label=\"User Contact\"\n                                    required\n                                    :rules=\"[required]\"\n                                    type=\"text\"\n                                    v-model=\"user.userContact\"\n                            >\n\n                            </v-text-field>\n                            <v-text-field\n                                    color=\"dark\"\n                                    label=\"User Email\"\n                                    required\n                                    :rules=\"[required]\"\n                                    type=\"text\"\n                                    v-model=\"user.userEmail\"\n                            >\n\n                            </v-text-field>\n                        </v-card-text>\n                    </v-card>\n                </Panel>\n            </v-flex>\n            <v-flex xs5>\n                <Panel title=\"User Metadata\">\n                    <v-card>\n                        <v-card-text>\n\n                            <v-select\n                                    color=\"dark\"\n                                    label=\"Discipline ID\"\n                                    :items=\"disciplineOptions\"\n                                    single-line\n                                    item-text=\"disciplineName\"\n                                    item-value=\"disciplineID\"\n                                    v-model=\"user.disciplineID\"\n                            >\n\n                            </v-select>\n                            <v-select\n                                    color=\"dark\"\n                                    label=\"Account Type\"\n                                    :items=\"accounts\"\n                                    v-model=\"user.accountType\"\n                            >\n\n                            </v-select>\n                        </v-card-text>\n\n                        <v-card-actions>\n                            <v-spacer></v-spacer>\n                            <v-btn dark color=\"dark\" @click=\"save\">Save User</v-btn>\n                            <v-btn dark color=\"red\" @click=\"deleteUser\">Delete User</v-btn>\n                        </v-card-actions>\n                    </v-card>\n                </Panel>\n            </v-flex>\n        </v-container>\n    </v-app>\n</template>\n\n<script>\n    import Panel from '@/components/Panel'\n    import UsersService from \"../services/UsersService\";\n    import DisciplineService from \"../services/DisciplineService\";\n    export default {\n        data() {\n            return{\n                user: {\n                    userID : null,\n                    userLogin: null,\n                    userPassword: null,\n                    userName: null,\n                    userContact: null,\n                    userEmail: null,\n                    disciplineID: null,\n                    accountType: null,\n                },\n                accounts: ['admin','staff-PT','staff-FT','hod'],\n                disciplineOptions: [],\n                disciplines: null,\n                required: (value) => !!value || 'Required.',\n                error: null\n            }\n\n        },\n        async mounted(){\n\n                const userID = this.$store.state.route.params.userid\n\n                console.log(this.$store.state);\n                this.user = (await UsersService.show(userID)).data\n\n            this.disciplines = (await DisciplineService.index()).data\n            this.disciplineOptions = this.disciplines\n        },\n        methods: {\n            async save() {\n                try {\n                    this.error = null;\n                    const areAllFieldsFilledIn = Object\n                        .keys(this.user)\n                        .every(key => !!this.user[key])\n                    if (!areAllFieldsFilledIn) {\n                        this.error = 'Please fill in all the required fields.'\n                        return\n                    }\n                    await UsersService.put(this.user)\n                    this.$router.push({\n                        name: 'user'\n                    })\n                } catch (err) {\n                    console.log(err)\n                }\n\n            },\n            async deleteUser() {\n                    await UsersService.delete(this.user)\n                    this.$router.push({\n                        name: 'user'\n                    })\n\n            }\n        },\n        components: {\n            Panel\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"]}]}