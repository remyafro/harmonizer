{"remainingRequest":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/remy/Documents/GitHub/harmonizer/client/src/components/CreateUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/remy/Documents/GitHub/harmonizer/client/src/components/CreateUser.vue","mtime":1573482140506},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/cache-loader/dist/cjs.js","mtime":1572018405923},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/babel-loader/lib/index.js","mtime":1572018403706},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/vuetify-loader/lib/loader.js","mtime":1572018408543},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/cache-loader/dist/cjs.js","mtime":1572018405923},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/vue-loader/lib/index.js","mtime":1572018406322}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvUGFuZWwnCmltcG9ydCBVc2Vyc1NlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvVXNlcnNTZXJ2aWNlIjsKaW1wb3J0IERpc2NpcGxpbmVTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL0Rpc2NpcGxpbmVTZXJ2aWNlIjsKaW1wb3J0IFVzZXJXb3JrTG9hZFNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvVXNlcldvcmtMb2FkU2VydmljZSI7CmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICB1c2VyOiB7CiAgICAgICAgICAgICAgICB1c2VySUQgOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMSkgKyAxLAogICAgICAgICAgICAgICAgdXNlckxvZ2luOiBudWxsLAogICAgICAgICAgICAgICAgdXNlclBhc3N3b3JkOiBudWxsLAogICAgICAgICAgICAgICAgdXNlck5hbWU6IG51bGwsCiAgICAgICAgICAgICAgICB1c2VyQ29udGFjdDogbnVsbCwKICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogbnVsbCwKICAgICAgICAgICAgICAgIGRpc2NpcGxpbmVJRDogbnVsbCwKICAgICAgICAgICAgICAgIGFjY291bnRUeXBlOiBudWxsLAogICAgICAgICAgICB9LAogICAgICAgICAgICBhY2NvdW50czogWydhZG1pbicsJ3N0YWZmLVBUJywnc3RhZmYtRlQnLCdob2QnXSwKICAgICAgICAgICAgZGlzY2lwbGluZU9wdGlvbnM6IFtdLAogICAgICAgICAgICBkaXNjaXBsaW5lczogbnVsbCwKICAgICAgICAgICAgcmVxdWlyZWQ6ICh2YWx1ZSkgPT4gISF2YWx1ZSB8fCAnUmVxdWlyZWQuJywKICAgICAgICAgICAgZXJyb3I6IG51bGwKICAgICAgICB9CgogICAgfSwKICAgIGFzeW5jIG1vdW50ZWQoKXsKICAgICAgICB0aGlzLmRpc2NpcGxpbmVzID0gKGF3YWl0IERpc2NpcGxpbmVTZXJ2aWNlLmluZGV4KCkpLmRhdGEKICAgICAgICB0aGlzLmRpc2NpcGxpbmVPcHRpb25zID0gdGhpcy5kaXNjaXBsaW5lcwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBhc3luYyBjcmVhdGUoKSB7CiAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBudWxsOwogICAgICAgICAgICBjb25zdCBhcmVBbGxGaWVsZHNGaWxsZWRJbiA9IE9iamVjdAogICAgICAgICAgICAgICAgLmtleXModGhpcy51c2VyKQogICAgICAgICAgICAgICAgLmV2ZXJ5KGtleSA9PiAhIXRoaXMudXNlcltrZXldKQogICAgICAgICAgICBpZiAoIWFyZUFsbEZpZWxkc0ZpbGxlZEluKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnVzZXIpOwogICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9ICdQbGVhc2UgZmlsbCBpbiBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkcy4nCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYodGhpcy51c2VyLmFjY291bnRUeXBlICE9ICdhZG1pbicpewogICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgIGF3YWl0IFVzZXJzU2VydmljZS5wb3N0KHRoaXMudXNlcikKICAgICAgICAgICAgICAgICAgICBhd2FpdCBVc2VyV29ya0xvYWRTZXJ2aWNlLnBvc3QodGhpcy51c2VyKQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3VzZXInCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH1jYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgIGF3YWl0IFVzZXJzU2VydmljZS5wb3N0KHRoaXMudXNlcikKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd1c2VyJwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9Y2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICB9CiAgICB9LAogICAgY29tcG9uZW50czogewogICAgICAgIFBhbmVsCiAgICB9Cn0K"},{"version":3,"sources":["CreateUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"CreateUser.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <v-app>\n            <v-container\n            class=\"fill-height align-start\"\n            >\n                <v-flex xs6 class=\"mr-4\">\n                    <v-alert\n                            v-if=\"error\"\n                            dismissible\n                            type=\"error\">{{ error }}</v-alert>\n                    <Panel title=\"User Metadata\">\n                        <v-card>\n                            <v-card-text>\n                                <v-text-field\n                                        color=\"dark\"\n                                        label=\"User ID\"\n                                        type=\"text\"\n                                        required\n                                        :rules=\"[required]\"\n                                        v-model=\"user.userID\"\n                                >\n                                </v-text-field>\n                                <v-text-field\n                                        color=\"dark\"\n                                        label=\"User Login\"\n                                        type=\"text\"\n                                        required\n                                        :rules=\"[required]\"\n                                        v-model=\"user.userLogin\"\n                                >\n\n                                </v-text-field>\n                                <v-text-field\n                                        color=\"dark\"\n                                        label=\"User Password\"\n                                        required\n                                        :rules=\"[required]\"\n                                        type=\"password\"\n                                        v-model=\"user.userPassword\"\n                                >\n\n                                </v-text-field>\n                                <v-text-field\n                                        color=\"dark\"\n                                        label=\"User Name\"\n                                        required\n                                        :rules=\"[required]\"\n                                        type=\"text\"\n                                        v-model=\"user.userName\"\n                                >\n\n                                </v-text-field>\n                                <v-text-field\n                                        color=\"dark\"\n                                        label=\"User Contact\"\n                                        required\n                                        :rules=\"[required]\"\n                                        type=\"text\"\n                                        v-model=\"user.userContact\"\n                                >\n\n                                </v-text-field>\n                                <v-text-field\n                                        color=\"dark\"\n                                        label=\"User Email\"\n                                        required\n                                        :rules=\"[required]\"\n                                        hint=\"Ending with @murdoch.edu.au\"\n                                        persistent-hint\n                                        type=\"text\"\n                                        v-model=\"user.userEmail\"\n                                >\n\n                                </v-text-field>\n                            </v-card-text>\n                        </v-card>\n                    </Panel>\n                </v-flex>\n                <v-flex xs5>\n                    <Panel title=\"User Metadata\">\n                        <v-card>\n                            <v-card-text>\n\n                                <v-select\n                                        color=\"dark\"\n                                        label=\"Discipline ID\"\n                                        :items=\"disciplineOptions\"\n                                        single-line\n                                        item-text=\"disciplineName\"\n                                        item-value=\"disciplineID\"\n                                        v-model=\"user.disciplineID\"\n                                >\n\n                                </v-select>\n                                <v-select\n                                        color=\"dark\"\n                                        label=\"Account Type\"\n                                        :items=\"accounts\"\n                                        v-model=\"user.accountType\"\n                                >\n\n                                </v-select>\n                            </v-card-text>\n\n                            <v-card-actions>\n                                <v-spacer></v-spacer>\n                                <v-btn dark color=\"dark\" @click=\"create\">Create User</v-btn>\n                            </v-card-actions>\n                        </v-card>\n                    </Panel>\n                </v-flex>\n            </v-container>\n    </v-app>\n</template>\n\n<script>\n    import Panel from '@/components/Panel'\n    import UsersService from \"../services/UsersService\";\n    import DisciplineService from \"../services/DisciplineService\";\n    import UserWorkLoadService from \"../services/UserWorkLoadService\";\n    export default {\n        data() {\n            return{\n                user: {\n                    userID : Math.floor(Math.random() * 10001) + 1,\n                    userLogin: null,\n                    userPassword: null,\n                    userName: null,\n                    userContact: null,\n                    userEmail: null,\n                    disciplineID: null,\n                    accountType: null,\n                },\n                accounts: ['admin','staff-PT','staff-FT','hod'],\n                disciplineOptions: [],\n                disciplines: null,\n                required: (value) => !!value || 'Required.',\n                error: null\n            }\n\n        },\n        async mounted(){\n            this.disciplines = (await DisciplineService.index()).data\n            this.disciplineOptions = this.disciplines\n        },\n        methods: {\n            async create() {\n                this.error = null;\n                const areAllFieldsFilledIn = Object\n                    .keys(this.user)\n                    .every(key => !!this.user[key])\n                if (!areAllFieldsFilledIn) {\n                    console.log(this.user);\n                    this.error = 'Please fill in all the required fields.'\n                    return\n                }\n\n                if(this.user.accountType != 'admin'){\n                    try{\n                        await UsersService.post(this.user)\n                        await UserWorkLoadService.post(this.user)\n                        this.$router.push({\n                            name: 'user'\n                        })\n                    }catch (err) {\n                        console.log(err)\n                    }\n                }\n                else {\n                    try{\n                        await UsersService.post(this.user)\n                        this.$router.push({\n                            name: 'user'\n                        })\n                    }catch (err) {\n                        console.log(err)\n                    }\n                }\n\n            }\n        },\n        components: {\n            Panel\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"]}]}