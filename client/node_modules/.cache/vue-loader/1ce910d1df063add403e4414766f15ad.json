{"remainingRequest":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/remy/Documents/GitHub/harmonizer/client/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/remy/Documents/GitHub/harmonizer/client/src/components/Login.vue","mtime":1573481419879},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/cache-loader/dist/cjs.js","mtime":1572018405923},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/babel-loader/lib/index.js","mtime":1572018403706},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/vuetify-loader/lib/loader.js","mtime":1572018408543},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/cache-loader/dist/cjs.js","mtime":1572018405923},{"path":"/Users/remy/Documents/GitHub/harmonizer/client/node_modules/vue-loader/lib/index.js","mtime":1572018406322}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBdXRoZW50aWNhdGlvblNlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvQXV0aGVudGljYXRpb25TZXJ2aWNlJzsKaW1wb3J0IFBhbmVsIGZyb20gJ0AvY29tcG9uZW50cy9QYW5lbCc7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICBlcnJvcjogbnVsbCwKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGxvZ2luICgpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEF1dGhlbnRpY2F0aW9uU2VydmljZS5sb2dpbih7CiAgICAgICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZSwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkCiAgICAgICAgfSkKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2V0VG9rZW4nLCByZXNwb25zZS5kYXRhLnRva2VuKQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXRVc2VyJywgcmVzcG9uc2UuZGF0YS51c2VyKQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXRQZXJtaXNzaW9uJywgcmVzcG9uc2UuZGF0YS51c2VydHlwZSkKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2V0RGlzY2lwbGluZScsIHJlc3BvbnNlLmRhdGEuZGlzY2lwbGluZWlkKQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yCiAgICAgIH0KICAgICAgY29uc3QgY3VycmVudFVzZXJQZXJtaXNzaW9uID0gdGhpcy4kc3RvcmUuc3RhdGUucGVybWlzc2lvbgogICAgICBpZiAoY3VycmVudFVzZXJQZXJtaXNzaW9uID09PSAnYWRtaW4nKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogJ2FkbWluLWRhc2hib2FyZCcKICAgICAgICB9KQogICAgICB9IGVsc2UgaWYgKGN1cnJlbnRVc2VyUGVybWlzc2lvbiA9PT0gJ2hvZCcpewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICdob2QtZGFzaGJvYXJkJwogICAgICAgIH0pCiAgICAgIH1lbHNlIGlmIChjdXJyZW50VXNlclBlcm1pc3Npb24gPT09ICdzdGFmZi1GVCcpewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICdzdGFmZi1kYXNoYm9hcmQnCiAgICAgICAgfSkKICAgICAgfQogICAgICBlbHNlIGlmIChjdXJyZW50VXNlclBlcm1pc3Npb24gPT09ICdzdGFmZi1QVCcpewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICdzdGFmZi1kYXNoYm9hcmQnCiAgICAgICAgfSkKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICB0aGlzLmVycm9yID0gJ0xvZ2luIGluZm9ybWF0aW9uIHdhcyBpbmNvcnJlY3QnCiAgICAgIH0KICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFBhbmVsCiAgfQp9Cgo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-app>\n    <v-content>\n      <v-container\n              class=\"fill-height justify-center align-center\"\n              fluid\n      >\n        <v-flex xs6>\n          <v-alert\n                  v-if=\"error\"\n                  dismissible\n                  type=\"error \">{{ error }}</v-alert>\n          <Panel title=\"login\">\n            <v-card>\n              <v-card-text>\n                <v-form>\n                  <v-text-field\n                          color=\"dark\"\n                          label=\"Username\"\n                          name=\"username\"\n                          prepend-icon=\"person\"\n                          type=\"text\"\n                          v-model=\"username\"\n                  ></v-text-field>\n\n                  <v-text-field\n                          color=\"dark\"\n                          id=\"password\"\n                          label=\"Password\"\n                          name=\"password\"\n                          prepend-icon=\"lock\"\n                          type=\"password\"\n                          v-model=\"password\"\n                  ></v-text-field>\n                </v-form>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn dark color=\"dark\" @click=\"login\">Login</v-btn>\n              </v-card-actions>\n            </v-card>\n          </Panel>\n        </v-flex>\n      </v-container>\n\n    </v-content>\n  </v-app>\n</template>\n\n<script>\n  import AuthenticationService from '../services/AuthenticationService';\n  import Panel from '@/components/Panel';\n\n  export default {\n    data() {\n      return {\n        username: '',\n        password: '',\n        error: null,\n      }\n    },\n    methods: {\n      async login () {\n        try {\n          const response = await AuthenticationService.login({\n            username: this.username,\n            password: this.password\n          })\n          this.$store.dispatch('setToken', response.data.token)\n          this.$store.dispatch('setUser', response.data.user)\n          this.$store.dispatch('setPermission', response.data.usertype)\n          this.$store.dispatch('setDiscipline', response.data.disciplineid)\n        } catch (error) {\n          this.error = error.response.data.error\n        }\n        const currentUserPermission = this.$store.state.permission\n        if (currentUserPermission === 'admin') {\n          this.$router.push({\n            name: 'admin-dashboard'\n          })\n        } else if (currentUserPermission === 'hod'){\n          this.$router.push({\n            name: 'hod-dashboard'\n          })\n        }else if (currentUserPermission === 'staff-FT'){\n          this.$router.push({\n            name: 'staff-dashboard'\n          })\n        }\n        else if (currentUserPermission === 'staff-PT'){\n          this.$router.push({\n            name: 'staff-dashboard'\n          })\n        }\n        else {\n          this.error = 'Login information was incorrect'\n        }\n      }\n    },\n    components: {\n      Panel\n    }\n  }\n\n</script>\n<style>\n  button{\n    color: #fff;\n  }\n</style>"]}]}